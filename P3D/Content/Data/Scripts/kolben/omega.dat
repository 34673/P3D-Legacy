version=2

	:if:<register.registered(omegamet)>=false
		@text.show(Omega: Greetings, I'm Omega,~the ghost!*I repurposed this basement~into a neat workplace.*Sure, it's a bit clumsy, but~that's better than nothing,~am I right or am I right?)
		@register.register(omegamet)
	:endif

	:if:<register.registered(omega1)>=false
		@text.show(Omega: Tell me, do you~like shinies?)
		@options.show(Yes,No)
			:when:Yes
				@text.show(Omega: Good, good...*I have accumulated a wide~selection of shiny Pokémon~over the years.*I might even give you one.*Let's settle it like this:~If you win against my strongest~Pokémon you get the shiny.*Deal?)
				@options.show(Deal,No Way)
					:when:Deal
						@battle.setvar(canblackout,false)
						@battle.trainer(kolben\omega1)
							:if:<battle.won>=true
								@pokemon.heal
								@register.register(omega1)
								@text.show(As expected, you did it!~Now let me see...*...*You'll get a Pikachu-colored~Pichu to call your own!)		
							:else
								@pokemon.heal
								@text.show(That's a bit disappointing.*Well, try again later!)
							:endif
					:when:No Way			
						@text.show(Oke.)
				:endwhen
			:when:No
				@text.show(That's heartless.)
		:endwhen
	:endif
	
	:if:<register.registered(pcpreceive)>=false <and> <register.registered(omega1)>=true
		:if:<register.registered(omega1)>=true <and> <register.registered(pcpreceive)>=false
			:if:<pokemon.count>>5
				@text.show(Oh, your party is full.~Go open some space to claim~your Pokémon!)
				:end
			:else
				@pokemon.add(172,40,A gift from Omega,45,at Kolben Tower,0,Omega)
				@text.show(Ah yes, your prize.*This Pichu is special:~I found it near the Ilex~Forest shrine.*I wonder what happens if~you take it back there.*Anyway, here it is!)
				@pokemon.setshiny(<pokemon.count>-1,1)
				@pokemon.setgender(<pokemon.count>-1,0)
				@pokemon.clearattacks(<pokemon.count>-1)
				@pokemon.addattack(<pokemon.count>-1,344)
				@pokemon.addattack(<pokemon.count>-1,57)
				@pokemon.addattack(<pokemon.count>-1,19)
				@pokemon.addattack(<pokemon.count>-1,231)
				@sound.play(success_small)
				@text.show(<player.name> received~Pichu!)
				@pokemon.rename(last)
				@register.register(pcpreceive)
				:end				
			:endif
		:endif
	:endif	
	
	:if:<register.registered(omega1)>=true <and> <register.registered(pcpreceive)>=true <and> <register.registered(omega2)>=false
		@text.show(Omega: It's a pleasure~to see you once again.*Say, do you want a real~battle now?)
		@options.show(Yes,No)
			:when:Yes
				@text.show(Omega: Very well.*Pick your favorite biome.)
				@battle.setvar(canblackout,false)
				@options.show(Savanna,Rainforest,Desert,Taiga)
					:when:Savanna
						@text.show(Omega: Initialize biome~simulation...)
						@screen.fadeout
						@player.warp(kolben\biome\savanna.dat,9,0.1,13,0)
						@level.wait(30)
						@level.update
						@player.turnto(3)
						@camera.set(0,1,1,4.75,-0.25)
						@screen.fadein
						@level.wait(60)
						@text.show(Omega: Here I come!)
						@battle.trainer(kolben\omega\omegas)
						:if:<battle.won>=true
							@pokemon.heal
							@register.registertime(omega2,1,day)
							@text.show(Impressive, I was bested.)		
						:else
							@pokemon.heal
							@text.show(A winner I am!)
						:endif
						@text.show(Omega: Shut down biome~simulation...)
						@level.wait(30)
						@screen.fadeout
						@player.warp(kolben\basement.dat,9,0.1,16,0)
						@level.wait(30)
						@level.update
						@player.turnto(2)
						@npc.turn(4,0)
						@camera.set(0,1,1,3.14,-0.25)
						@screen.fadein
						@level.wait(60)
						@text.show(Omega: That was good.)
					:when:Rainforest
						@text.show(Omega: Initialize biome~simulation...)
						@screen.fadeout
						@player.warp(kolben\biome\rainforest.dat,9,0.1,13,0)
						@level.wait(30)
						@level.update
						@player.turnto(3)
						@camera.set(0,1,1,4.75,-0.25)
						@screen.fadein
						@level.wait(60)
						@text.show(Omega: Here I come!)
						@battle.trainer(kolben\omega\omegar)
						:if:<battle.won>=true
							@pokemon.heal
							@register.registertime(omega2,1,day)
							@text.show(Impressive, I was bested.)		
						:else
							@pokemon.heal
							@text.show(A winner I am!)
						:endif
						@text.show(Omega: Shut down biome~simulation...)
						@level.wait(30)
						@screen.fadeout
						@player.warp(kolben\basement.dat,9,0.1,16,0)
						@level.wait(30)
						@level.update
						@player.turnto(2)
						@npc.turn(4,0)
						@camera.set(0,1,1,3.14,-0.25)
						@screen.fadein
						@level.wait(60)
						@text.show(Omega: That was good.)
					:when:Desert
						@text.show(Omega: Initialize biome~simulation...)
						@screen.fadeout
						@player.warp(kolben\biome\desert.dat,9,0.1,13,0)
						@level.wait(30)
						@level.update
						@player.turnto(3)
						@camera.set(0,1,1,4.75,-0.25)
						@screen.fadein
						@level.wait(60)
						@text.show(Omega: Here I come!)
						@battle.trainer(kolben\omega\omegad)
						:if:<battle.won>=true
							@pokemon.heal
							@register.registertime(omega2,1,day)
							@text.show(Impressive, I was bested.)		
						:else
							@pokemon.heal
							@text.show(A winner I am!)
						:endif
						@text.show(Omega: Shut down biome~simulation...)
						@level.wait(30)
						@screen.fadeout
						@player.warp(kolben\basement.dat,9,0.1,16,0)
						@level.wait(30)
						@level.update
						@player.turnto(2)
						@npc.turn(4,0)
						@camera.set(0,1,1,3.14,-0.25)
						@screen.fadein
						@level.wait(60)
						@text.show(Omega: That was good.)
					:when:Taiga
						@text.show(Omega: Initialize biome~simulation...)
						@screen.fadeout
						@player.warp(kolben\biome\taiga.dat,9,0.1,13,0)
						@level.wait(30)
						@level.update
						@player.turnto(3)
						@camera.set(0,1,1,4.75,-0.25)
						@screen.fadein
						@level.wait(60)
						@text.show(Omega: Here I come!)
						@battle.trainer(kolben\omega\omegat)
						:if:<battle.won>=true
							@pokemon.heal
							@register.registertime(omega2,1,day)
							@text.show(Impressive, I was bested.)		
						:else
							@pokemon.heal
							@text.show(A winner I am!)
						:endif
						@text.show(Omega: Shut down biome~simulation...)
						@level.wait(30)
						@screen.fadeout
						@player.warp(kolben\basement.dat,9,0.1,16,0)
						@level.wait(30)
						@level.update
						@player.turnto(2)
						@npc.turn(4,0)
						@camera.set(0,1,1,3.14,-0.25)
						@screen.fadein
						@level.wait(60)
						@text.show(Omega: That was good.)
				:endwhen
			:when:No			
				@text.show(Oke.)
		:endwhen
	:endif
	
	:if:<register.registered(omega1)>=true <and> <register.registered(pcpreceive)>=true <and> <register.registered(omega2)>=true
		@text.show(We can have another~battle tomorrow!)
	:endif
	
:end